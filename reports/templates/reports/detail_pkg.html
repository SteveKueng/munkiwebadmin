{% load report_extras %}

<div class="row text-right" style="position:absolute; top:110px; right:40px;">
  <div id='save_and_cancel' class="hidden-print btn-group">
    <input type='button' class='edit btn btn-primary' value='Edit'></input>
  </div>
</div>    

{% if report.Errors|length or report.Warnings|length %}
<!-- Error / Warnings -->
<div class="row">
  <div class="col-md-12">
    <a name="errors">&nbsp;</a>
    {% if report.Errors|length %}
      <h4>Errors</h4>
      <pre class="alert alert-danger">{{ report.Errors|join:'<br>' }}</pre>
    {% endif %}
    {% if report.Warnings|length %}
    <h4>Warnings</h4>
    <pre class="alert alert-warning">{{ report.Warnings|join:'<br>' }}</pre>
    {% endif %}
  </div>
</div>
{% endif %}

<!-- Manifests / Catalog -->
<div class="row" id="manifest_detail">
  <!-- Manifests -->
  <div class='col-md-6 manifest_section'>
    <div class="section_label"><h4>Included Manifests</h4></div>
      <ul id='included_manifests' class='included_manifests_section list-group unstyled'>
        {% for item in manifest.included_manifests %}
          <li id='{{ item }}'class='list-group-item entrys 
          {% if item not in valid_manifest_names %}
            list-group-item-danger'>
                <div class='editable'>{{ item }}</div>
          {% else %}
            list-group-item-info'>
            <a href='{% url "manifests.views.view" item %}'>
                <div class='editable'>{{ item }}</div>
            </a>
          {% endif %}
          </li>
        {% endfor %}
      </ul>
  </div>

  <!-- Catalogs -->
  <div class='col-md-6 manifest_section'>
    <div class="section_label"><h4>Catalogs</h4></div>
      <ul id='catalogs' class='catalogs_section list-group unstyled'>
        {% for item in manifest.catalogs %}
            <li id='{{ item }}' class='list-group-item entrys 
            {% if item not in valid_catalogs %}
            list-group-item-danger'>
                <div class='editable'>{{ item }}</div>
            {% else %}
            list-group-item-info'>
              <a href='/catalog/{{ item }}/'>
                  <div class='editable'>{{ item }}</div>
              </a>
            {% endif %}
            </li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>

<!-- Software -->
<div class="row">
  <div class="col-md-12 manifest_section">
    <div class="section_label_software">
      <h4>Managed Installs 
        <div class="btn-group">
          <button type="button" id="managed_installs_btn" onclick="hideTable('managed_installs', this.id);" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span></button>
        </div>
      </h4>
    </div>
    <table class="managed_installs client_info table table-condensed">
      <!-- Managed Installs -->
      <tbody id="managed_installs" class="catalogs_section">
      {% for item in manifest.managed_installs %}
        {% if item in true_items %}
            {% include "reports/detail_list.html" with itemdetail=item_details|access_name:item version=item_details|access_version:item icon=item_details|access_icon:item editclass="sw_entrys" item=item manifest="" %}
          {% else %}
            {% include "reports/detail_list.html" with itemdetail=item item=item class="danger" icon="/static/img/PackageIcon.png" editclass="sw_entrys" manifest="" %}
          {% endif %}
      {% endfor %}
      </tbody>
      <tbody>
      {% for values, manifest in includetManifests.items %}
        {% for item in manifest.managed_installs %}
          {% if item in true_items %}
            {% include "reports/detail_list.html" with item=item itemdetail=item_details|access_name:item version=item_details|access_version:item icon=item_details|access_icon:item manifest=values %}
          {% else %}
            {% include "reports/detail_list.html" with itemdetail=item item=item class="danger" icon="/static/img/PackageIcon.png" manifest=values %}
          {% endif %}
        {% endfor %}
      {% endfor %}
      </tbody>
    </table>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-12 manifest_section">
    <div class="section_label_software">
      <h4>Optional Installs 
        <div class="btn-group">
          <button type="button" id="optional_installs_btn" onclick="showTable('optional_installs', this.id);" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>
        </div>
      </h4>
    </div>
    <table class="optional_installs client_info table table-condensed hidden">
      <tbody id="optional_installs" class="catalogs_section">
      {% for item in manifest.optional_installs %}
        {% if item in true_items %}
            {% include "reports/detail_list.html" with itemdetail=item_details|access_name:item version=item_details|access_version:item icon=item_details|access_icon:item editclass="sw_entrys" item=item manifest="" %}
          {% else %}
            {% include "reports/detail_list.html" with itemdetail=item item=item class="danger" icon="/static/img/PackageIcon.png" editclass="sw_entrys" manifest="" %}
          {% endif %}
      {% endfor %}
      </tbody>
      <tbody>
      {% for values, manifest in includetManifests.items %}
        <!-- Optional installs -->
        {% for item in manifest.optional_installs %}
          {% if item in true_items %}
            {% include "reports/detail_list.html" with item=item itemdetail=item_details|access_name:item version=item_details|access_version:item icon=item_details|access_icon:item manifest=values %}
          {% else %}
            {% include "reports/detail_list.html" with itemdetail=item item=item class="danger" icon="/static/img/PackageIcon.png" manifest=values %}
          {% endif %}
        {% endfor %}
      {% endfor %}
      </tbody>
    </table>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-12 manifest_section">
    <div class="section_label_software">
      <h4>Managed Uninstalls 
        <div class="btn-group">
          <button type="button" id="managed_uninstalls_btn" onclick="hideTable('managed_uninstalls', this.id);" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span></button>
        </div>
      </h4>
    </div>
    <table class="managed_uninstalls client_info table table-condensed">
      <tbody id="managed_uninstalls" class="catalogs_section">
      {% for item in manifest.managed_uninstalls %}
        {% if item in true_items %}
            {% include "reports/detail_list.html" with itemdetail=item_details|access_name:item version=item_details|access_version:item icon=item_details|access_icon:item editclass="sw_entrys" item=item manifest="" %}
          {% else %}
            {% include "reports/detail_list.html" with itemdetail=item item=item class="danger" icon="/static/img/PackageIcon.png" editclass="sw_entrys" manifest="" %}
          {% endif %}
      {% endfor %}
      </tbody>
      <tbody>
      {% for values, manifest in includetManifests.items %}
        <!-- Optional installs -->
        {% for item in manifest.managed_uninstalls %}
          {% if item in true_items %}
            {% include "reports/detail_list.html" with item=item itemdetail=item_details|access_name:item version=item_details|access_version:item icon=item_details|access_icon:item manifest=values %}
          {% else %}
            {% include "reports/detail_list.html" with itemdetail=item item=item class="danger" icon="/static/img/PackageIcon.png" manifest=values %}
          {% endif %}
        {% endfor %}
      {% endfor %}
      </tbody>
    </table>
    </div>
  </div>
</div>
<div id="data_storage" data-autocomplete_data='{{ autocomplete_data }}' />